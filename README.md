# Project Yellowstone: Old Faithful

Project Yellowstone: Old Faithful is the project to make all of Solana's history accessible, content addressable and available via a variety of means. The goal of this project is to completely replace the Bigtable dependency for Solana history access with a self-hostable, decentralized history archive that is usable for infrastructure providers, individual Solana users, explorers, indexers, and anyone else in need for historical access.

## Overview

The core of the project are history archives in Content Addressable format ([overview](https://web3.storage/docs/how-tos/work-with-car-files/), [specs](https://ipld.io/specs/transport/car/carv1/)). These represent a verifiable, immutable view of the Solana history. The CAR files that this project generates follows a [schema](https://github.com/gagliardetto/radiance-triton/blob/tx_meta/cmd/radiance/car/createcar/ledger.ipldsch) specifically developed for Solana's historical archives. 

The content addressable nature means that each epoch, block, transaction and shreddingis uniquely identified by a content hash. By knowing this content hash you will be able to retreive a specific object of your interest. Retreivals can be made via IPFS, the Filecoin network, or even by hosting the CAR files yourself on disk, a ceph cluster, S3, you name it.

Indexes will be needed to map Solana's block numbers, transaction signatures and addresses to their respective CIDs. These indexes will be developed as part of this project. 

## Archive access

The archive is currently under development. There will be two main ways to access the archive during its development phase:

1. Via Filecoin: Through collaboration with Protocol Labs and a Filplus allocation we are uploading all historical data to Filecoin. From here, any user can access the full histortical archive verifiably and freely from the Filecoin network. This is helpful as a way to test retreivals and fetch individual transactions.
2. Bulk transfer: If you want to start testing full epoch archives, we can provide you with access to a storage bucket from where you can pull the epoch archives


## Tooling

The tooling used in this project is based in the `radiance` tool developed by Jump's Firedancer team. It is rapidely developing, and active development for this project is currently based out of this repository and branch: [Radiance Triton](https://github.com/gagliardetto/radiance-triton/tree/tx_meta/).

The radiance tool utilises the rocksdb snapshots that have been generated by [Warehouse](https://github.com/solana-labs/solana-bigtable) nodes. From these snapshots 

Currently, this tool is being tested from the following warehouse archives:
  - Solana Foundation (public)
    -  gs://mainnet-beta-ledger-us-ny5
    -  gs://mainnet-beta-ledger-europe-fr2
    -  gs://mainnet-beta-ledger-asia-sg1
  - Triton One (private)

If you have warehouse nodes generating rocksdb archive snapshots, please contact lk@triton.one (even if they can't be made publicly available). We would like to have you generate CAR files for verification purposes.

## Data preparation

Using the rocksdb archives, the Radiance tool can be used to generate one CAR file per epoch. This CAR file is then made available via storage providers such as Filecoin and private storage buckets. 

## Querying

Currently, querying can be done from Filecoin using the lassie utility:

```
lassie fetch <cid>
```

There is also a `dump2` tool available in the [Radiance repo](https://github.com/gagliardetto/radiance-triton/tree/tx_meta/) that can help you dump the contents returned from Lassie.

Other query methods that are on the roadmap:

- A wrapper for Filecoin retrievals that allows parsing of the retrieved schema/data
- A JSON RPC gateway that takes Solana JSONRPC requests and can respond to them via backends such as Filecoin or S3.

## Contact

This project is currently managed by [Triton One](https://triton.one/). If you want more information contact us via [Telegram](https://t.me/+K0ONdq7fE4s0Mjdl). 

## Acknowledgements

The originator of this project was Richard Patel (@terorie / https://twitter.com/fd_ripatel). This work has been supported greatly by Protocol Labs (special shout out to @anjor for all the guidance in Filecoin land to us Solana locals). The Solana Foundation is funding this effort through a project grant. Solana.fm was one of the initiators of this project. Also thanks to all RPC providers and others who have (and are) providing input to and support for this process. 
